#    _____ ____     _____             __ _
#   |_   _|___ \   / ____|           / _(_)
#     | |   __) | | |     ___  _ __ | |_ _  __ _
#     | |  |__ <  | |    / _ \| '_ \|  _| |/ _` |
#    _| |_ ___) | | |___| (_) | | | | | | | (_| |
#   |_____|____/   \_____\___/|_| |_|_| |_|\__, |
#                                           __/ |
#                                          |___/
# I3 Config files for Desktop Machine

#--- i3 Settings ---#
set $mod Mod4
set $altmod Mod1
font pango: Source Code Pro 10, FontAwesome 10


#--- Window Managment Settings ---#
new_window pixel 1
new_float normal
# Hide borders
hide_edge_borders none

focus_follows_mouse yes

# i3 Gaps binds
bindsym $mod+y border pixel 1
bindsym $mod+n border normal

# Basic i3 key binds
floating_modifier $mod
bindsym $mod+q kill
bindsym $mod+v split toggle
bindsym $mod+shift+v layout toggle split
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+space focus mode_toggle

# Toggle floating/sticky window
bindsym $mod+Shift+space floating toggle
bindsym $mod+Shift+s sticky toggle

# alt+tab back and forth
# workspace back and forth (with/without active container)
workspace_auto_back_and_forth yes
bindsym Mod1+Tab workspace back_and_forth
bindsym Mod1+Shift+Tab move container to workspace back_and_forth; workspace back_and_forth


#--- Workspace Assignments ---#
# assign [class="^Steam?"] workspace 8
for_window [class="spotify"] move to workspace 10

for_window [class="Slack"] move to workspace 9
for_window [class="discord"] move to workspace 9

for_window [class="Steam"] move to workspace 8

#--- Floating Windows ---#
for_window [title="alsamixer"] floating enable border pixel 1
for_window [class="Calamares"] floating enable border normal
for_window [class="Clipgrab"] floating enable
for_window [title="File Transfer*"] floating enable
for_window [class="Galculator"] floating enable border pixel 1
for_window [class="GParted"] floating enable border normal
for_window [title="i3_help"] floating enable sticky enable border normal
for_window [class="Lightdm-gtk-greeter-settings"] floating enable
for_window [class="Lxappearance"] floating enable sticky enable border normal
for_window [class="Manjaro-hello"] floating enable
for_window [class="Manjaro Settings Manager"] floating enable border normal
for_window [title="MuseScore: Play Panel"] floating enable
for_window [class="Nitrogen"] floating enable sticky enable border normal
for_window [class="Oblogout"] fullscreen enable
for_window [class="octopi"] floating enable
for_window [title="About Pale Moon"] floating enable
for_window [class="Pamac-manager"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="qt5ct"] floating enable sticky enable border normal
for_window [class="Qtconfig-qt4"] floating enable sticky enable border normal
for_window [class="Simple-scan"] floating enable border normal
for_window [class="(?i)System-config-printer.py"] floating enable border normal
for_window [class="Skype"] floating enable border normal
for_window [class="Thus"] floating enable border normal
for_window [class="Timeset-gui"] floating enable border normal
for_window [class="(?i)virtualbox"] floating enable border normal
for_window [class="Xfburn"] floating enable


#--- i3 Gaps Options ---#
# Set inner/outer gaps
gaps inner 10
gaps outer -4

# Additionally, you can issue commands with the following syntax. This is useful to bind keys to changing the gap size.
# gaps inner|outer current|all set|plus|minus <px>
# gaps inner all set 10
# gaps outer all plus 5

# Smart gaps (gaps used if only more than one container on the workspace)

# Smart borders (draw borders around container only if it is not the only container on this workspace)
# on|no_gaps (on=always activate and no_gaps=only activate if the gap size to the edge of the screen is 0)
smart_borders on

#--- Window Movement and Manipulation ---#
# Change window focus using jklh or cursor keys
bindsym $mod+h focus left
bindsym $mod+k focus down
bindsym $mod+j focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move focused window using SHIFT+ jklh or cursor keys
bindsym $mod+Shift+h move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+j move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right



# Switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1; workspace 1
bindsym $mod+Shift+2 move container to workspace 2; workspace 2
bindsym $mod+Shift+3 move container to workspace 3; workspace 3
bindsym $mod+Shift+4 move container to workspace 4; workspace 4
bindsym $mod+Shift+5 move container to workspace 5; workspace 5
bindsym $mod+Shift+6 move container to workspace 6; workspace 6
bindsym $mod+Shift+7 move container to workspace 7; workspace 7
bindsym $mod+Shift+8 move container to workspace 8; workspace 8
bindsym $mod+Shift+9 move container to workspace 9; workspace 9
bindsym $mod+Shift+0 move container to workspace 10; workspace 10

# -- STARTUP--
# Create a dropdown window for a Master Ranger instance
for_window [instance="RangerDropdown"] floating enable
for_window [instance="RangerDropdown"] resize set 825 500
for_window [instance="RangerDropdown"] move scratchpad
for_window [instance="RangerDropdown"] border pixel 5
# Starts a terminal with the Ranger filebrowser for easy reusability
#exec --no-startup-id urxvt -name RangerDropdown -e ranger

#--- Mode Initialiations ---#
#
# Resize window mode (you can also use the mouse for that)
# 	Resize: jkl. changes by 10px, Arrow keys change by 5px.
#	Home: Resize a floating window to small video window
mode "resize" {
        bindsym l resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym h resize grow width 10 px or 10 ppt
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

		bindsym Home resize set 600px 340px

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Gaming Passthrough mode:
# 	Prevent i3 binds from being executed while playing a game
mode "passthrough" {
    bindsym $altmod+Escape mode "default"
    bindsym XF86AudioPlay exec playerctl play-pause
    bindsym XF86AudioPause exec playerctl stop
    bindsym XF86AudioNext exec playerctl next
    bindsym XF86AudioPrev exec playerctl previous
}

# Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the change will be global for all workspaces.
mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_inner" {
        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

#--- Mode Bindings ---#
bindsym $mod+r mode "resize"
bindsym $altmod+Escape mode "passthrough"

# i3 Gaps
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

#--- Startup Commands ---#

# Monitor xrandr settings
exec --no-startup-id xrandr --output HDMI-0 --rate 75

# Start Polybar and Compton
# Kill compton to prevent multiple running instances
exec_always --no-startup-id "pkill compton; compton"
exec_always --no-startup-id $HOME/.i3/launchpoly.sh

# Set mouse sensitivity settings
# exec_always --no-startup-id exec "/home/cooper/.config/i3/scripts/set_mouse_options.sh"
exec --no-startup-id redshift-gtk
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id nitrogen --restore
exec --no-startup-id xautolock -time 10 -locker "dm-tool lock"
exec_always --no-startup-id fix_xcursor

exec_always --no-startup-id /home/cooper/bin/set_mouse_options.sh

#--- Launch Applications Binds ---#
bindsym $mod+Return exec terminal
# Start terminal also using numpad enter
bindcode $mod+104 exec  terminal

bindsym $mod+e exec pcmanfm
bindsym $mod+d exec rofi -show run

#--- Command Binds ---#
bindsym $mod+p exec "dm-tool lock"
bindsym $mod+Shift+p exec "systemctl suspend"

# Additional Menus
bindsym $mod+z exec --no-startup-id morc_menu
bindsym $mod+Ctrl+b exec terminal -e 'bmenu'

# Pulse Audio Startups
exec --no-startup-id pulseaudio
exec --no-startup-id pa-applet
bindsym $mod+Ctrl+m exec pavucontrol

# Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

#--- Dropdown Terminal Binds ---#
# Launch dropdown if closed; toggle scratchpad
bindsym $mod+u exec "dropdown"; [instance="RangerDropdown"] scratchpad show; [instance="RangerDropdown"] move position center

# reload config, restart, or exitinstance
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# next/prev workspace (./,)
bindcode $mod+60 workspace next
bindcode $mod+59 workspace prev

# --- Misc --- #
bindsym $mod+t exec --no-startup-id pkill compton
bindsym $mod+Ctrl+t exec --no-startup-id compton -b
bindsym $mod+Shift+d --release exec "killall dunst; exec notify-send 'restart dunst'"
# Screenshot Tools
bindsym Print exec --no-startup-id i3-scrot
bindsym $mod+Print --release exec --no-startup-id i3-scrot -w
bindsym $mod+Shift+Print --release exec --no-startup-id i3-scrot -s
# Kill X shortcut
bindsym $mod+Ctrl+x --release exec --no-startup-id xkill

#--- Media key binds ---#
bindsym XF86AudioPlay "exec playerctl play-pause & exec cmus-remote -u"
bindsym XF86AudioPause "exec playerctl stop & exec cmus-remote -s"
bindsym XF86AudioNext "exec playerctl next & exec cmus-remote -n"
bindsym XF86AudioPrev "exec playerctl previous & exec cmus-remote -r"

#--- Audio key binds ---#
bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -q -D pulse sset Master 5%+
bindsym XF86AudioLowerVolume exec --no-startup-id amixer -q -D pulse sset Master 5%-
bindsym XF86AudioMute exec --no-startup-id amixer -q -D pulse sset Master toggle

#--- i3 Colors ---#
set_from_resource $term_background background
set_from_resource $term_foreground foreground
set_from_resource $term_color0     color0
set_from_resource $term_color1     color1
set_from_resource $term_color2     color2
set_from_resource $term_color3     color3
set_from_resource $term_color4     color4
set_from_resource $term_color5     color5
set_from_resource $term_color6     color6
set_from_resource $term_color7     color7
set_from_resource $term_color8     color8
set_from_resource $term_color9     color9
set_from_resource $term_color10    color10
set_from_resource $term_color11    color11
set_from_resource $term_color12    color12
set_from_resource $term_color13    color13
set_from_resource $term_color14    color14
set_from_resource $term_color15    color15

# Color palette used for i3
# Variables are set based on the documentation:
# https://i3wm.org/dovs/userguide.html#variables
# Changing the value of one of the variables will
# effect all the areas with the same color.
set $i3_background      #2B2C2B
set $i3_text            #F9FAF9
set $i3_separator       #454947
set $i3_color1          #f9faf9
set $i3_color2          #595B5B
set $i3_color3          #353836
set $i3_color4          #16A085
set $i3_color5          #FDF6E3
set $i3_color6          #EEE8D5
set $i3_color7          #E5201D
set $i3_color8          #808380
set $i3_color9          #434745
set $i3_color10         #454948
set $i3_color11         #80FFF9
set $i3_color12         #FDF6E3
set $i3_color13         #CB4B16
set $i3_color14         #268BD2
set $i3_color15         #000000
set $i3_color16         #ffffff
set $i3_color17         #0c0c0c

#--- Theme colors ---#
# class                 border      backgr.     text        indic.      child_border
client.focused          $i3_color8  $i3_color8  $i3_color11 $i3_color12
client.focused_inactive $i3_color8  $i3_color8  $i3_color11  $i3_color12
client.unfocused        $i3_color9  $i3_color9  $i3_color4  $i3_color10
client.urgent           $i3_color13 $i3_color12 $i3_color4  $i3_color14
client.placeholder      $i3_color15 $i3_color17 $i3_color16 $i3_color15 $i3_color17
client.background       $i3_background

